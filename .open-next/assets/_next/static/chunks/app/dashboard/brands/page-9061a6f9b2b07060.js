(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4796],{2382:(a,e,s)=>{Promise.resolve().then(s.bind(s,3263))},3263:(a,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>p});var t=s(5155),n=s(2115),r=s(2619),l=s.n(r),d=s(5239),i=s(2694),o=s(3945),_=s(9513),c=s.n(_);function p(){let{t:a,language:e}=(0,o.useLanguage)(),[s,r]=(0,n.useState)([]),[_,p]=(0,n.useState)(!0),[g,h]=(0,n.useState)(!1),[b,u]=(0,n.useState)(null),[m,j]=(0,n.useState)({name:"",logo_url:"",type:"platform"}),[f,x]=(0,n.useState)(""),[v,y]=(0,n.useState)(!1),[N,w]=(0,n.useState)(null),k=(0,n.useRef)(null),C="ar"===e?i.dyV:i.kRp,B=async()=>{p(!0);try{let a=await fetch("/api/brands?all=true&t=".concat(Date.now()),{cache:"no-store"}),e=await a.json();r(e.brands||[])}catch(a){}finally{p(!1)}};(0,n.useEffect)(()=>{B()},[]);let I=async a=>{var e;let s=null==(e=a.target.files)?void 0:e[0];if(!s)return;let t=new FileReader;t.onload=a=>{var e;w(null==(e=a.target)?void 0:e.result)},t.readAsDataURL(s),y(!0),x("");try{let a=new FormData;a.append("file",s),a.append("folder","brands");let e=await fetch("/api/upload",{method:"POST",body:a}),t=await e.json();if(!e.ok)throw Error(t.error||"Upload failed");j({...m,logo_url:t.url})}catch(a){x(a instanceof Error?a.message:"Upload failed"),w(null)}finally{y(!1)}},P=async e=>{if(e.preventDefault(),x(""),v)return void x("Please wait for the image to finish uploading");if(!m.name.trim())return void x(a("dashboard.brands.nameRequired"));p(!0);try{let a=b?"PUT":"POST",e=b?{id:b.id,...m,is_active:b.is_active}:m,s=await fetch("/api/brands",{method:a,headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),t=await s.json();if(!s.ok)throw Error(t.error||"Failed to save");h(!1),u(null),j({name:"",logo_url:"",type:"platform"}),w(null),await B()}catch(e){x(e instanceof Error?e.message:a("dashboard.errorOccurred"))}finally{p(!1)}},A=async e=>{if(confirm(a("dashboard.brands.confirmDelete")))try{await fetch("/api/brands?id=".concat(e),{method:"DELETE"}),B()}catch(a){}},E=async a=>{try{await fetch("/api/brands",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...a,is_active:+!a.is_active})}),B()}catch(a){}},L=()=>{h(!1),u(null),j({name:"",logo_url:"",type:"platform"}),w(null),x("")};return(0,t.jsx)("div",{className:c().dashboard,children:(0,t.jsxs)("div",{className:"container",children:[(0,t.jsxs)("div",{className:c().header,children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(l(),{href:"/dashboard",className:c().backLink,children:[(0,t.jsx)(C,{}),a("dashboard.backToDashboard")]}),(0,t.jsx)("h1",{children:a("dashboard.brands.title")}),(0,t.jsx)("p",{children:a("dashboard.brands.subtitle")})]}),(0,t.jsxs)("button",{className:"btn btn-primary",onClick:()=>{h(!0),u(null),j({name:"",logo_url:"",type:"platform"}),w(null),x("")},children:[(0,t.jsx)(i.GGD,{}),a("dashboard.brands.addNew")]})]}),g&&(0,t.jsx)("div",{className:c().modal,children:(0,t.jsxs)("div",{className:c().modalContent,children:[(0,t.jsxs)("div",{className:c().modalHeader,children:[(0,t.jsx)("h2",{children:b?a("dashboard.brands.edit"):a("dashboard.brands.addNew")}),(0,t.jsx)("button",{onClick:L,className:c().closeBtn,children:(0,t.jsx)(i.yGN,{})})]}),(0,t.jsxs)("form",{onSubmit:P,className:c().settingsForm,children:[f&&(0,t.jsx)("div",{className:c().errorAlert,children:f}),(0,t.jsxs)("div",{className:c().formGroup,children:[(0,t.jsx)("label",{className:c().label,children:a("dashboard.brands.name")}),(0,t.jsx)("input",{type:"text",value:m.name,onChange:a=>j({...m,name:a.target.value}),className:c().input,placeholder:a("dashboard.brands.namePlaceholder")})]}),(0,t.jsxs)("div",{className:c().formGroup,children:[(0,t.jsx)("label",{className:c().label,children:a("dashboard.brands.logo")}),(0,t.jsxs)("div",{className:c().uploadArea,children:[N?(0,t.jsxs)("div",{className:c().uploadPreview,children:[(0,t.jsx)(d.default,{src:N,alt:"Preview",width:120,height:60,style:{objectFit:"contain"}}),(0,t.jsx)("button",{type:"button",className:c().removePreview,onClick:()=>{w(null),j({...m,logo_url:""}),k.current&&(k.current.value="")},children:(0,t.jsx)(i.yGN,{})})]}):(0,t.jsx)("div",{className:c().uploadPlaceholder,onClick:()=>{var a;return null==(a=k.current)?void 0:a.click()},children:v?(0,t.jsx)("span",{className:c().spinner}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.B88,{size:24}),(0,t.jsx)("span",{children:a("dashboard.brands.uploadLogo")})]})}),(0,t.jsx)("input",{ref:k,type:"file",accept:"image/*",onChange:I,className:c().fileInput,disabled:v})]})]}),(0,t.jsxs)("div",{className:c().formGroup,children:[(0,t.jsx)("label",{className:c().label,children:a("dashboard.brands.type")}),(0,t.jsxs)("select",{value:m.type,onChange:a=>j({...m,type:a.target.value}),className:c().input,children:[(0,t.jsx)("option",{value:"platform",children:a("dashboard.brands.typePlatform")}),(0,t.jsx)("option",{value:"partner",children:a("dashboard.brands.typePartner")})]})]}),(0,t.jsxs)("div",{className:c().formActions,children:[(0,t.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:v||_,children:_?(0,t.jsx)("span",{className:c().spinner}):b?a("dashboard.saveChanges"):a("dashboard.brands.add")}),(0,t.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:L,disabled:_,children:a("common.cancel")})]})]})]})}),(0,t.jsx)("div",{className:c().card,children:_?(0,t.jsx)("div",{className:c().loading,children:a("dashboard.loading")}):0===s.length?(0,t.jsx)("div",{className:c().empty,children:a("dashboard.brands.noBrands")}):(0,t.jsx)("div",{className:c().tableWrapper,children:(0,t.jsxs)("table",{className:c().table,children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:a("dashboard.brands.logo")}),(0,t.jsx)("th",{children:a("dashboard.brands.name")}),(0,t.jsx)("th",{children:a("dashboard.brands.type")}),(0,t.jsx)("th",{children:a("dashboard.brands.status")}),(0,t.jsx)("th",{children:a("dashboard.brands.actions")})]})}),(0,t.jsx)("tbody",{children:s.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:e.logo_url?(0,t.jsx)(d.default,{src:e.logo_url,alt:e.name,width:60,height:30,className:c().logoPreview,style:{objectFit:"contain"}}):(0,t.jsx)("div",{className:c().noLogo,children:(0,t.jsx)(i.fZZ,{})})}),(0,t.jsx)("td",{children:e.name}),(0,t.jsx)("td",{children:(0,t.jsx)("span",{className:c().typeLabel,children:"platform"===e.type?a("dashboard.brands.typePlatform"):a("dashboard.brands.typePartner")})}),(0,t.jsx)("td",{children:(0,t.jsx)("span",{className:"".concat(c().badge," ").concat(e.is_active?c().badgeSuccess:c().badgeWarning),children:e.is_active?a("dashboard.brands.active"):a("dashboard.brands.inactive")})}),(0,t.jsx)("td",{children:(0,t.jsxs)("div",{className:c().actionBtns,children:[(0,t.jsx)("button",{onClick:()=>E(e),className:c().actionBtn,title:e.is_active?a("dashboard.brands.deactivate"):a("dashboard.brands.activate"),children:e.is_active?(0,t.jsx)(i.yGN,{}):(0,t.jsx)(i.YrT,{})}),(0,t.jsx)("button",{onClick:()=>{u(e),j({name:e.name,logo_url:e.logo_url||"",type:e.type}),w(e.logo_url),h(!0)},className:c().actionBtn,children:(0,t.jsx)(i.WXf,{})}),(0,t.jsx)("button",{onClick:()=>A(e.id),className:"".concat(c().actionBtn," ").concat(c().danger),children:(0,t.jsx)(i.IXo,{})})]})})]},e.id))})]})})})]})})}},9513:a=>{a.exports={dashboard:"page_dashboard__kNuGp",header:"page_header__hMSOF",statsGrid:"page_statsGrid___pqlK",statCard:"page_statCard__tKMY7",statIcon:"page_statIcon__jUdPR",primary:"page_primary__NNHI1",success:"page_success__DCYIY",warning:"page_warning__Pz2zu",info:"page_info__xXc7j",statInfo:"page_statInfo__hVtfu",statValue:"page_statValue__Ngvpx",statLabel:"page_statLabel__xyDJ2",mainGrid:"page_mainGrid__ORtMb",card:"page_card__FwMm5",cardHeader:"page_cardHeader__BKx4i",viewAll:"page_viewAll__xro1p",contentList:"page_contentList__LWyb1",contentItem:"page_contentItem__s3nz3",contentInfo:"page_contentInfo__GqgZj",company:"page_company__J1Du_",contentMeta:"page_contentMeta__hRWwu",badge:"page_badge__v8rDn",badgeSuccess:"page_badgeSuccess__ztJF8",badgeWarning:"page_badgeWarning___M_v2",date:"page_date__Y5SEs",rating:"page_rating__MjYmM",starFilled:"page_starFilled__XcnEJ",contentActions:"page_contentActions__o4MHh",actionBtn:"page_actionBtn__e1gK9",backLink:"page_backLink__10O1e",refreshBtn:"page_refreshBtn__C3waT",spinning:"page_spinning__st8Jr",spin:"page_spin__83Eln",loading:"page_loading__eqTbn",empty:"page_empty__7ZIVI",filters:"page_filters__BOlgE",filterBtn:"page_filterBtn__cEAgg",active:"page_active__sBdJ3",tableCard:"page_tableCard__sV85v",table:"page_table__t8tSi",titleCell:"page_titleCell__Zjy1Z",tableActions:"page_tableActions__qU_ki",danger:"page_danger__9lHzf",formCard:"page_formCard__N3yfk",formGroup:"page_formGroup__uGATh",formRow:"page_formRow__zaa3I",label:"page_label__iBEwE",input:"page_input__olAOO",select:"page_select__Ojb9E",textarea:"page_textarea__GBXO6",formActions:"page_formActions__w_nBD",errorAlert:"page_errorAlert__nHXMP",ratingInput:"page_ratingInput__RTdqJ",starBtn:"page_starBtn__brrSR",settingsGrid:"page_settingsGrid__OQYlm",settingsCard:"page_settingsCard__bTeJ5",settingsCardHeader:"page_settingsCardHeader__ycHQi",settingsIcon:"page_settingsIcon__Unn27",settingsForm:"page_settingsForm__Qyddf",settingsDesc:"page_settingsDesc__vE_u4",adminEmail:"page_adminEmail__4y_Xw",successAlert:"page_successAlert__AdipL",modal:"page_modal__uDDBs",modalContent:"page_modalContent__G_uO1",modalHeader:"page_modalHeader__jjc3E",closeBtn:"page_closeBtn__kFI75",tableWrapper:"page_tableWrapper__kYU93",logoPreview:"page_logoPreview__AI5jC",noLogo:"page_noLogo__V5uAu",typeLabel:"page_typeLabel__c2EaY",actionBtns:"page_actionBtns__nJt4M",quickLinks:"page_quickLinks__e8ky5",quickLinkCard:"page_quickLinkCard__RdZfR",quickLinkIcon:"page_quickLinkIcon__qA_f1",uploadArea:"page_uploadArea__y6Bt7",uploadPlaceholder:"page_uploadPlaceholder__MW9IE",uploadPreview:"page_uploadPreview__4V_e3",removePreview:"page_removePreview__XH8IV",fileInput:"page_fileInput__Vb3vt",spinner:"page_spinner__STN52"}}},a=>{a.O(0,[5071,6603,3193,5239,3945,8441,1255,7358],()=>a(a.s=2382)),_N_E=a.O()}]);