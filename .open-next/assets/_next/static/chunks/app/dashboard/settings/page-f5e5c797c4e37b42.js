(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4631],{2085:(e,a,s)=>{Promise.resolve().then(s.bind(s,6700))},6700:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>g});var t=s(5155),r=s(2115),n=s(2619),i=s.n(n),_=s(2694),o=s(3945),d=s(9513),l=s.n(d);let c="info@tdlogistics.co";function g(){let{t:e,language:a}=(0,o.useLanguage)(),[s,n]=(0,r.useState)("request"),[d,g]=(0,r.useState)(""),[p,h]=(0,r.useState)(""),[m,b]=(0,r.useState)(""),[u,f]=(0,r.useState)(!1),[y,j]=(0,r.useState)(""),[v,x]=(0,r.useState)(""),w=async a=>{a.preventDefault(),j(""),f(!0);try{let a=await fetch("/api/admin/otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"request",email:c})}),s=await a.json();if(!a.ok)throw Error(s.error||e("dashboard.settings.error"));n("verify"),x(e("dashboard.settings.otpSent"))}catch(a){j(a instanceof Error?a.message:e("dashboard.settings.error"))}finally{f(!1)}},N=async a=>{a.preventDefault(),j(""),f(!0);try{let a=await fetch("/api/admin/otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"verify",email:c,otp:d})}),s=await a.json();if(!a.ok)throw Error(s.error||e("dashboard.settings.error"));n("newPassword"),x(e("dashboard.settings.otpVerified"))}catch(a){j(a instanceof Error?a.message:e("dashboard.settings.error"))}finally{f(!1)}},k=async a=>{if(a.preventDefault(),j(""),p.length<6)return void j(e("dashboard.settings.passwordMinLength"));if(p!==m)return void j(e("dashboard.settings.passwordMismatch"));f(!0);try{let a=await fetch("/api/admin/otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"changePassword",email:c,otp:d,newPassword:p})}),s=await a.json();if(!a.ok)throw Error(s.error||e("dashboard.settings.error"));x(e("dashboard.settings.passwordChanged")),n("request"),g(""),h(""),b("")}catch(a){j(a instanceof Error?a.message:e("dashboard.settings.error"))}finally{f(!1)}},C="ar"===a?_.dyV:_.kRp;return(0,t.jsx)("div",{className:l().dashboard,children:(0,t.jsxs)("div",{className:"container",children:[(0,t.jsx)("div",{className:l().header,children:(0,t.jsxs)("div",{children:[(0,t.jsxs)(i(),{href:"/dashboard",className:l().backLink,children:[(0,t.jsx)(C,{}),e("dashboard.settings.backToDashboard")]}),(0,t.jsx)("h1",{children:e("dashboard.settings.title")})]})}),(0,t.jsx)("div",{className:l().settingsGrid,children:(0,t.jsxs)("div",{className:l().settingsCard,children:[(0,t.jsxs)("div",{className:l().settingsCardHeader,children:[(0,t.jsx)(_.F5$,{className:l().settingsIcon}),(0,t.jsx)("h2",{children:e("dashboard.settings.changePassword")})]}),v&&(0,t.jsxs)("div",{className:l().successAlert,children:[(0,t.jsx)(_.YrT,{}),v]}),y&&(0,t.jsxs)("div",{className:l().errorAlert,children:[(0,t.jsx)(_.y3G,{}),y]}),"request"===s&&(0,t.jsxs)("form",{onSubmit:w,className:l().settingsForm,children:[(0,t.jsx)("p",{className:l().settingsDesc,children:e("dashboard.settings.requestOtpDesc")}),(0,t.jsx)("p",{className:l().adminEmail,children:c}),(0,t.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:u,children:u?e("dashboard.settings.sending"):e("dashboard.settings.sendOtp")})]}),"verify"===s&&(0,t.jsxs)("form",{onSubmit:N,className:l().settingsForm,children:[(0,t.jsx)("p",{className:l().settingsDesc,children:e("dashboard.settings.enterOtp")}),(0,t.jsxs)("div",{className:l().formGroup,children:[(0,t.jsx)("label",{className:l().label,children:e("dashboard.settings.otpCode")}),(0,t.jsx)("input",{type:"text",value:d,onChange:e=>g(e.target.value),className:l().input,placeholder:"123456",maxLength:6,required:!0,dir:"ltr",style:{textAlign:"center",letterSpacing:"0.5rem",fontSize:"1.5rem"}})]}),(0,t.jsxs)("div",{className:l().formActions,children:[(0,t.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:u,children:u?e("dashboard.settings.verifying"):e("dashboard.settings.verify")}),(0,t.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>{n("request"),j(""),x("")},children:e("common.back")})]})]}),"newPassword"===s&&(0,t.jsxs)("form",{onSubmit:k,className:l().settingsForm,children:[(0,t.jsx)("p",{className:l().settingsDesc,children:e("dashboard.settings.enterNewPassword")}),(0,t.jsxs)("div",{className:l().formGroup,children:[(0,t.jsx)("label",{className:l().label,children:e("dashboard.settings.newPassword")}),(0,t.jsx)("input",{type:"password",value:p,onChange:e=>h(e.target.value),className:l().input,placeholder:"••••••••",minLength:6,required:!0})]}),(0,t.jsxs)("div",{className:l().formGroup,children:[(0,t.jsx)("label",{className:l().label,children:e("dashboard.settings.confirmPassword")}),(0,t.jsx)("input",{type:"password",value:m,onChange:e=>b(e.target.value),className:l().input,placeholder:"••••••••",minLength:6,required:!0})]}),(0,t.jsxs)("div",{className:l().formActions,children:[(0,t.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:u,children:u?e("dashboard.settings.changing"):e("dashboard.settings.changePasswordBtn")}),(0,t.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>{n("request"),j(""),x("")},children:e("common.cancel")})]})]})]})})]})})}},9513:e=>{e.exports={dashboard:"page_dashboard__kNuGp",header:"page_header__hMSOF",statsGrid:"page_statsGrid___pqlK",statCard:"page_statCard__tKMY7",statIcon:"page_statIcon__jUdPR",primary:"page_primary__NNHI1",success:"page_success__DCYIY",warning:"page_warning__Pz2zu",info:"page_info__xXc7j",statInfo:"page_statInfo__hVtfu",statValue:"page_statValue__Ngvpx",statLabel:"page_statLabel__xyDJ2",mainGrid:"page_mainGrid__ORtMb",card:"page_card__FwMm5",cardHeader:"page_cardHeader__BKx4i",viewAll:"page_viewAll__xro1p",contentList:"page_contentList__LWyb1",contentItem:"page_contentItem__s3nz3",contentInfo:"page_contentInfo__GqgZj",company:"page_company__J1Du_",contentMeta:"page_contentMeta__hRWwu",badge:"page_badge__v8rDn",badgeSuccess:"page_badgeSuccess__ztJF8",badgeWarning:"page_badgeWarning___M_v2",date:"page_date__Y5SEs",rating:"page_rating__MjYmM",starFilled:"page_starFilled__XcnEJ",contentActions:"page_contentActions__o4MHh",actionBtn:"page_actionBtn__e1gK9",backLink:"page_backLink__10O1e",refreshBtn:"page_refreshBtn__C3waT",spinning:"page_spinning__st8Jr",spin:"page_spin__83Eln",loading:"page_loading__eqTbn",empty:"page_empty__7ZIVI",filters:"page_filters__BOlgE",filterBtn:"page_filterBtn__cEAgg",active:"page_active__sBdJ3",tableCard:"page_tableCard__sV85v",table:"page_table__t8tSi",titleCell:"page_titleCell__Zjy1Z",tableActions:"page_tableActions__qU_ki",danger:"page_danger__9lHzf",formCard:"page_formCard__N3yfk",formGroup:"page_formGroup__uGATh",formRow:"page_formRow__zaa3I",label:"page_label__iBEwE",input:"page_input__olAOO",select:"page_select__Ojb9E",textarea:"page_textarea__GBXO6",formActions:"page_formActions__w_nBD",errorAlert:"page_errorAlert__nHXMP",ratingInput:"page_ratingInput__RTdqJ",starBtn:"page_starBtn__brrSR",settingsGrid:"page_settingsGrid__OQYlm",settingsCard:"page_settingsCard__bTeJ5",settingsCardHeader:"page_settingsCardHeader__ycHQi",settingsIcon:"page_settingsIcon__Unn27",settingsForm:"page_settingsForm__Qyddf",settingsDesc:"page_settingsDesc__vE_u4",adminEmail:"page_adminEmail__4y_Xw",successAlert:"page_successAlert__AdipL",modal:"page_modal__uDDBs",modalContent:"page_modalContent__G_uO1",modalHeader:"page_modalHeader__jjc3E",closeBtn:"page_closeBtn__kFI75",tableWrapper:"page_tableWrapper__kYU93",logoPreview:"page_logoPreview__AI5jC",noLogo:"page_noLogo__V5uAu",typeLabel:"page_typeLabel__c2EaY",actionBtns:"page_actionBtns__nJt4M",quickLinks:"page_quickLinks__e8ky5",quickLinkCard:"page_quickLinkCard__RdZfR",quickLinkIcon:"page_quickLinkIcon__qA_f1",uploadArea:"page_uploadArea__y6Bt7",uploadPlaceholder:"page_uploadPlaceholder__MW9IE",uploadPreview:"page_uploadPreview__4V_e3",removePreview:"page_removePreview__XH8IV",fileInput:"page_fileInput__Vb3vt",spinner:"page_spinner__STN52"}}},e=>{e.O(0,[5071,6603,3193,3945,8441,1255,7358],()=>e(e.s=2085)),_N_E=e.O()}]);