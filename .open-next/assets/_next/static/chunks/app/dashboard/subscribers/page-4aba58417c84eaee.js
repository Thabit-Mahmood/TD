(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7401],{143:(e,a,s)=>{"use strict";s.d(a,{o:()=>t.useLanguage});var t=s(3945)},1741:(e,a,s)=>{Promise.resolve().then(s.bind(s,8340))},3640:(e,a,s)=>{"use strict";function t(e){let a="string"==typeof e?parseFloat(e):e;return isNaN(a)?String(e):new Intl.NumberFormat("en-US").format(a)}s.d(a,{ZV:()=>t})},8340:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>b});var t=s(5155),r=s(2115),i=s(2619),c=s.n(i),n=s(2694),_=s(143),d=s(3640),l=s(9513),o=s.n(l);function b(){let{t:e,language:a,isRTL:s}=(0,_.o)(),[i,l]=(0,r.useState)([]),[b,g]=(0,r.useState)(!0),[p,h]=(0,r.useState)("all"),u={contact:e("dashboard.subscribers.sourceContact"),quote:e("dashboard.subscribers.sourceQuote"),manual:e("dashboard.subscribers.sourceManual"),blog:e("dashboard.subscribers.sourceBlog")},m=async()=>{g(!0);try{let e=await fetch("/api/admin/subscribers",{cache:"no-store"}),a=await e.json();a.subscribers&&l(a.subscribers)}catch(e){}finally{g(!1)}};(0,r.useEffect)(()=>{m()},[]);let j=async(e,a)=>{try{(await fetch("/api/admin/subscribers/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({is_active:+(1!==a)})})).ok&&m()}catch(e){}},v=async a=>{if(confirm(e("dashboard.confirmDeleteSubscriber")))try{(await fetch("/api/admin/subscribers/".concat(a),{method:"DELETE"})).ok&&m()}catch(e){}},x=i.filter(e=>"active"===p?1===e.is_active:"inactive"!==p||0===e.is_active),f=i.filter(e=>1===e.is_active).length,N=i.filter(e=>0===e.is_active).length,k=s?n.dyV:n.kRp;return(0,t.jsx)("div",{className:o().dashboard,children:(0,t.jsxs)("div",{className:"container",children:[(0,t.jsxs)("div",{className:o().header,children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(c(),{href:"/dashboard",className:o().backLink,children:[(0,t.jsx)(k,{}),e("dashboard.backToDashboard")]}),(0,t.jsx)("h1",{children:e("dashboard.subscribersManagement")})]}),(0,t.jsxs)("button",{onClick:m,className:o().refreshBtn,disabled:b,children:[(0,t.jsx)(n.jTZ,{className:b?o().spinning:""}),e("dashboard.refresh")]})]}),(0,t.jsxs)("div",{className:o().statsGrid,children:[(0,t.jsxs)("div",{className:o().statCard,children:[(0,t.jsx)("div",{className:"".concat(o().statIcon," ").concat(o().primary),children:(0,t.jsx)(n.pHD,{})}),(0,t.jsxs)("div",{className:o().statInfo,children:[(0,t.jsx)("span",{className:o().statValue,children:(0,d.ZV)(i.length)}),(0,t.jsx)("span",{className:o().statLabel,children:e("dashboard.subscribers.totalSubscribers")})]})]}),(0,t.jsxs)("div",{className:o().statCard,children:[(0,t.jsx)("div",{className:"".concat(o().statIcon," ").concat(o().success),children:(0,t.jsx)(n.YrT,{})}),(0,t.jsxs)("div",{className:o().statInfo,children:[(0,t.jsx)("span",{className:o().statValue,children:(0,d.ZV)(f)}),(0,t.jsx)("span",{className:o().statLabel,children:e("dashboard.subscribers.activeSubscribers")})]})]}),(0,t.jsxs)("div",{className:o().statCard,children:[(0,t.jsx)("div",{className:"".concat(o().statIcon," ").concat(o().warning),children:(0,t.jsx)(n.yGN,{})}),(0,t.jsxs)("div",{className:o().statInfo,children:[(0,t.jsx)("span",{className:o().statValue,children:(0,d.ZV)(N)}),(0,t.jsx)("span",{className:o().statLabel,children:e("dashboard.subscribers.unsubscribed")})]})]})]}),(0,t.jsxs)("div",{className:o().filters,children:[(0,t.jsxs)("button",{className:"".concat(o().filterBtn," ").concat("all"===p?o().active:""),onClick:()=>h("all"),children:[e("dashboard.subscribers.filterAll")," (",(0,d.ZV)(i.length),")"]}),(0,t.jsxs)("button",{className:"".concat(o().filterBtn," ").concat("active"===p?o().active:""),onClick:()=>h("active"),children:[e("dashboard.subscribers.filterActive")," (",(0,d.ZV)(f),")"]}),(0,t.jsxs)("button",{className:"".concat(o().filterBtn," ").concat("inactive"===p?o().active:""),onClick:()=>h("inactive"),children:[e("dashboard.subscribers.filterInactive")," (",(0,d.ZV)(N),")"]})]}),(0,t.jsx)("div",{className:o().tableCard,children:b?(0,t.jsx)("div",{className:o().loading,children:e("dashboard.loading")}):0===x.length?(0,t.jsx)("div",{className:o().empty,children:(0,t.jsx)("p",{children:e("dashboard.subscribers.noSubscribers")})}):(0,t.jsxs)("table",{className:o().table,children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:e("dashboard.subscribers.tableEmail")}),(0,t.jsx)("th",{children:e("dashboard.subscribers.tableName")}),(0,t.jsx)("th",{children:e("dashboard.subscribers.tableSource")}),(0,t.jsx)("th",{children:e("dashboard.subscribers.tableStatus")}),(0,t.jsx)("th",{children:e("dashboard.subscribers.tableDate")}),(0,t.jsx)("th",{children:e("dashboard.subscribers.tableActions")})]})}),(0,t.jsx)("tbody",{children:x.map(a=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{dir:"ltr",style:{textAlign:s?"right":"left"},children:a.email}),(0,t.jsx)("td",{children:a.name||"-"}),(0,t.jsx)("td",{children:u[a.source]||a.source}),(0,t.jsx)("td",{children:(0,t.jsx)("span",{className:"".concat(o().badge," ").concat(a.is_active?o().badgeSuccess:o().badgeWarning),children:a.is_active?e("dashboard.subscribers.statusActive"):e("dashboard.subscribers.statusInactive")})}),(0,t.jsx)("td",{children:(e=>{let a=new Date(e);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(a)})(a.subscribed_at)}),(0,t.jsx)("td",{children:(0,t.jsxs)("div",{className:o().tableActions,children:[(0,t.jsxs)("button",{className:o().actionBtn,onClick:()=>j(a.id,a.is_active),title:a.is_active?e("dashboard.subscribers.deactivate"):e("dashboard.subscribers.activate"),children:[a.is_active?(0,t.jsx)(n.yGN,{}):(0,t.jsx)(n.YrT,{}),a.is_active?e("dashboard.subscribers.deactivate"):e("dashboard.subscribers.activate")]}),(0,t.jsx)("button",{className:"".concat(o().actionBtn," ").concat(o().danger),onClick:()=>v(a.id),title:e("dashboard.delete"),children:e("dashboard.delete")})]})})]},a.id))})]})})]})})}},9513:e=>{e.exports={dashboard:"page_dashboard__kNuGp",header:"page_header__hMSOF",statsGrid:"page_statsGrid___pqlK",statCard:"page_statCard__tKMY7",statIcon:"page_statIcon__jUdPR",primary:"page_primary__NNHI1",success:"page_success__DCYIY",warning:"page_warning__Pz2zu",info:"page_info__xXc7j",statInfo:"page_statInfo__hVtfu",statValue:"page_statValue__Ngvpx",statLabel:"page_statLabel__xyDJ2",mainGrid:"page_mainGrid__ORtMb",card:"page_card__FwMm5",cardHeader:"page_cardHeader__BKx4i",viewAll:"page_viewAll__xro1p",contentList:"page_contentList__LWyb1",contentItem:"page_contentItem__s3nz3",contentInfo:"page_contentInfo__GqgZj",company:"page_company__J1Du_",contentMeta:"page_contentMeta__hRWwu",badge:"page_badge__v8rDn",badgeSuccess:"page_badgeSuccess__ztJF8",badgeWarning:"page_badgeWarning___M_v2",date:"page_date__Y5SEs",rating:"page_rating__MjYmM",starFilled:"page_starFilled__XcnEJ",contentActions:"page_contentActions__o4MHh",actionBtn:"page_actionBtn__e1gK9",backLink:"page_backLink__10O1e",refreshBtn:"page_refreshBtn__C3waT",spinning:"page_spinning__st8Jr",spin:"page_spin__83Eln",loading:"page_loading__eqTbn",empty:"page_empty__7ZIVI",filters:"page_filters__BOlgE",filterBtn:"page_filterBtn__cEAgg",active:"page_active__sBdJ3",tableCard:"page_tableCard__sV85v",table:"page_table__t8tSi",titleCell:"page_titleCell__Zjy1Z",tableActions:"page_tableActions__qU_ki",danger:"page_danger__9lHzf",formCard:"page_formCard__N3yfk",formGroup:"page_formGroup__uGATh",formRow:"page_formRow__zaa3I",label:"page_label__iBEwE",input:"page_input__olAOO",select:"page_select__Ojb9E",textarea:"page_textarea__GBXO6",formActions:"page_formActions__w_nBD",errorAlert:"page_errorAlert__nHXMP",ratingInput:"page_ratingInput__RTdqJ",starBtn:"page_starBtn__brrSR",settingsGrid:"page_settingsGrid__OQYlm",settingsCard:"page_settingsCard__bTeJ5",settingsCardHeader:"page_settingsCardHeader__ycHQi",settingsIcon:"page_settingsIcon__Unn27",settingsForm:"page_settingsForm__Qyddf",settingsDesc:"page_settingsDesc__vE_u4",adminEmail:"page_adminEmail__4y_Xw",successAlert:"page_successAlert__AdipL",modal:"page_modal__uDDBs",modalContent:"page_modalContent__G_uO1",modalHeader:"page_modalHeader__jjc3E",closeBtn:"page_closeBtn__kFI75",tableWrapper:"page_tableWrapper__kYU93",logoPreview:"page_logoPreview__AI5jC",noLogo:"page_noLogo__V5uAu",typeLabel:"page_typeLabel__c2EaY",actionBtns:"page_actionBtns__nJt4M",quickLinks:"page_quickLinks__e8ky5",quickLinkCard:"page_quickLinkCard__RdZfR",quickLinkIcon:"page_quickLinkIcon__qA_f1",uploadArea:"page_uploadArea__y6Bt7",uploadPlaceholder:"page_uploadPlaceholder__MW9IE",uploadPreview:"page_uploadPreview__4V_e3",removePreview:"page_removePreview__XH8IV",fileInput:"page_fileInput__Vb3vt",spinner:"page_spinner__STN52"}}},e=>{e.O(0,[5071,6603,3193,3945,8441,1255,7358],()=>e(e.s=1741)),_N_E=e.O()}]);