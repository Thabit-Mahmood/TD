(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6242],{63:(e,s,a)=>{"use strict";var t=a(7260);a.o(t,"useParams")&&a.d(s,{useParams:function(){return t.useParams}}),a.o(t,"usePathname")&&a.d(s,{usePathname:function(){return t.usePathname}}),a.o(t,"useRouter")&&a.d(s,{useRouter:function(){return t.useRouter}}),a.o(t,"useSearchParams")&&a.d(s,{useSearchParams:function(){return t.useSearchParams}})},469:(e,s,a)=>{Promise.resolve().then(a.bind(a,7165))},847:(e,s,a)=>{"use strict";a.d(s,{k5:()=>c});var t=a(2115),i={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},n=t.createContext&&t.createContext(i),r=function(){return(r=Object.assign||function(e){for(var s,a=1,t=arguments.length;a<t;a++)for(var i in s=arguments[a])Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i]);return e}).apply(this,arguments)},l=function(e,s){var a={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&0>s.indexOf(t)&&(a[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,t=Object.getOwnPropertySymbols(e);i<t.length;i++)0>s.indexOf(t[i])&&Object.prototype.propertyIsEnumerable.call(e,t[i])&&(a[t[i]]=e[t[i]]);return a};function c(e){return function(s){return t.createElement(d,r({attr:r({},e.attr)},s),function e(s){return s&&s.map(function(s,a){return t.createElement(s.tag,r({key:a},s.attr),e(s.child))})}(e.child))}}function d(e){var s=function(s){var a,i=e.attr,n=e.size,c=e.title,d=l(e,["attr","size","title"]),o=n||s.size||"1em";return s.className&&(a=s.className),e.className&&(a=(a?a+" ":"")+e.className),t.createElement("svg",r({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},s.attr,i,d,{className:a,style:r(r({color:e.color||s.color},s.style),e.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),c&&t.createElement("title",null,c),e.children)};return void 0!==n?t.createElement(n.Consumer,null,function(e){return s(e)}):s(i)}},5676:e=>{e.exports={trackingPage:"page_trackingPage__LoQt_",hero:"page_hero__vQw0v",content:"page_content__A4i__",searchCard:"page_searchCard__KRe7B",searchForm:"page_searchForm__uwpW2",inputWrapper:"page_inputWrapper__9qcop",searchIcon:"page_searchIcon__AsX63",searchInput:"page_searchInput__Jbeep",searchButton:"page_searchButton__GHtdz",error:"page_error__GwqyW",results:"page_results__dDOrj",progressCard:"page_progressCard__90P1h",progressHeader:"page_progressHeader__UubWs",currentStatus:"page_currentStatus__iY8vl",trackingId:"page_trackingId__riZa0",progressPercentage:"page_progressPercentage__C50q5",progressBar:"page_progressBar__mnMQN",milestoneWrapper:"page_milestoneWrapper__cun9X",milestoneItem:"page_milestoneItem__qNFko",milestoneIcon:"page_milestoneIcon__HA9c5",completed:"page_completed__5KLH1",active:"page_active__15jOr",pulseActive:"page_pulseActive__0uE_f",milestoneLabel:"page_milestoneLabel__rThNh",progressLine:"page_progressLine__wT7Sr",estimatedDelivery:"page_estimatedDelivery__dAnOq",infoGrid:"page_infoGrid__XMNOF",infoCard:"page_infoCard__QNt_j",infoIcon:"page_infoIcon__mfVmH",detailsToggle:"page_detailsToggle__mfPOS",detailsCard:"page_detailsCard__DsWf1",slideDown:"page_slideDown__wbpxk",detailsGrid:"page_detailsGrid___ER2a",detailItem:"page_detailItem__mSkug",detailLabel:"page_detailLabel__yrlaD",detailValue:"page_detailValue__zkxMS",statusValue:"page_statusValue__7HGub",timelineCard:"page_timelineCard__emJoI",timelineHeader:"page_timelineHeader__1QwYz",timelineToggle:"page_timelineToggle__2BocY",timeline:"page_timeline__8GMvr",timelineItem:"page_timelineItem__cvaLO",timelineDot:"page_timelineDot__dFxbM",timelineContent:"page_timelineContent__yHr5I",timelineEvent:"page_timelineEvent__FoZ1u",timelineMeta:"page_timelineMeta__6XUMc",gregorianDate:"page_gregorianDate__U23VA",timelineMetaSecondary:"page_timelineMetaSecondary__6c21N",islamicDate:"page_islamicDate__LB0AT",pulseActiveMobile:"page_pulseActiveMobile__cjhYE"}},7165:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>g});var t=a(5155),i=a(2115),n=a(63),r=a(2694),l=a(3945),c=a(5676),d=a.n(c),o=function(e){return e[e.RECEIVED=1]="RECEIVED",e[e.PROCESSING=2]="PROCESSING",e[e.OUT_FOR_DELIVERY=3]="OUT_FOR_DELIVERY",e[e.DELIVERED=4]="DELIVERED",e[e.RETURNED=5]="RETURNED",e[e.FAILED=6]="FAILED",e[e.CANCELLED=7]="CANCELLED",e}(o||{});let u=(e,s)=>e.includes("RETURN")||e.includes("REJECTED")?[{stage:1,label:s("tracking.milestones.received"),icon:(0,t.jsx)(r.X3y,{})},{stage:2,label:s("tracking.milestones.processing"),icon:(0,t.jsx)(r.est,{})},{stage:3,label:s("tracking.milestones.outForDelivery"),icon:(0,t.jsx)(r.BLY,{})},{stage:5,label:s("tracking.milestones.returned"),icon:(0,t.jsx)(r.y3G,{})}]:e.includes("FAIL")||e.includes("CANCEL")?[{stage:1,label:s("tracking.milestones.received"),icon:(0,t.jsx)(r.X3y,{})},{stage:2,label:s("tracking.milestones.processing"),icon:(0,t.jsx)(r.est,{})},{stage:6,label:s("tracking.milestones.failed")||"Failed",icon:(0,t.jsx)(r.y3G,{})}]:[{stage:1,label:s("tracking.milestones.received"),icon:(0,t.jsx)(r.X3y,{})},{stage:2,label:s("tracking.milestones.processing"),icon:(0,t.jsx)(r.est,{})},{stage:3,label:s("tracking.milestones.outForDelivery"),icon:(0,t.jsx)(r.BLY,{})},{stage:4,label:s("tracking.milestones.delivered"),icon:(0,t.jsx)(r.A3x,{})}],m={DELIVERED_TO_RECIPIENT:4,DELIVERED:4,COMPLETED:4,SCANNED_BY_DRIVER_AND_IN_CAR:3,OUT_FOR_DELIVERY:3,IN_TRANSIT:3,ON_THE_WAY:3,READY_FOR_PICKUP:2,IN_WAREHOUSE:2,PROCESSING:2,AT_HUB:2,SORTING:2,PICKED_UP:1,RECEIVED:1,CREATED:1,REGISTERED:1,RETURNED:5,RETURN_TO_SENDER:5,REJECTED:5,FAILED:6,CANCELLED:7,DELIVERY_FAILED:6};function g(){var e,s;let{t:a,language:c}=(0,l.useLanguage)(),o=(0,n.useSearchParams)(),[g,p]=(0,i.useState)(""),[_,h]=(0,i.useState)(null),[v,x]=(0,i.useState)(!1),[j,N]=(0,i.useState)(""),[E,D]=(0,i.useState)(!1),[f,k]=(0,i.useState)(!1);(0,i.useEffect)(()=>{let e=o.get("barcode");e&&(p(e),y(e))},[o]);let y=async e=>{let s=e||g;if(!s.trim())return void N(a("tracking.errors.enterNumber"));let t=s.trim().toUpperCase().replace(/[^A-Z0-9]/g,"");if(t.length<5||t.length>30)return void N(a("tracking.errors.invalidNumber"));x(!0),N(""),h(null);try{let e=await fetch("/api/tracking?barcode=".concat(encodeURIComponent(t))),s=await e.json();if(!e.ok)throw Error(s.error||a("tracking.errors.searchError"));h(s)}catch(e){N(e instanceof Error?e.message:a("tracking.errors.searchError"))}finally{x(!1)}},b=e=>{let s=new Date(e);return new Intl.DateTimeFormat("ar"===c?"ar-EG":"en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(s)},I=e=>{let s=new Date(e);return new Intl.DateTimeFormat("ar-SA-u-ca-islamic",{day:"numeric",month:"long",year:"numeric"}).format(s)},C=e=>m[e]||1;return(0,t.jsxs)("div",{className:d().trackingPage,children:[(0,t.jsx)("section",{className:d().hero,children:(0,t.jsxs)("div",{className:"container",children:[(0,t.jsx)("h1",{children:a("tracking.title")}),(0,t.jsx)("p",{children:a("tracking.subtitle")})]})}),(0,t.jsx)("section",{className:d().content,children:(0,t.jsxs)("div",{className:"container",children:[(0,t.jsxs)("div",{className:d().searchCard,children:[(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),y()},className:d().searchForm,children:[(0,t.jsxs)("div",{className:d().inputWrapper,children:[(0,t.jsx)(r.CKj,{className:d().searchIcon}),(0,t.jsx)("input",{type:"text",value:g,onChange:e=>{p(e.target.value),N("")},placeholder:a("tracking.placeholder"),className:d().searchInput,maxLength:30,dir:"ltr"})]}),(0,t.jsx)("button",{type:"submit",className:d().searchButton,disabled:v,children:v?(0,t.jsx)("span",{className:"spinner"}):a("tracking.button")})]}),j&&(0,t.jsxs)("div",{className:d().error,children:[(0,t.jsx)(r.y3G,{}),(0,t.jsx)("span",{children:j})]})]}),_&&(0,t.jsxs)("div",{className:d().results,children:[(0,t.jsxs)("div",{className:d().progressCard,children:[(0,t.jsxs)("div",{className:d().progressHeader,children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:d().currentStatus,children:"ar"===c?_.arStatus:_.enStatus}),(0,t.jsxs)("p",{className:d().trackingId,children:[a("tracking.trackingNumber"),": ",_.barcode]})]}),(0,t.jsxs)("div",{className:d().progressPercentage,children:[((e,s)=>{let t=u(s,a),i=t.length,n=t.findIndex(s=>s.stage===e);return -1===n?25:Math.round((n+1)/i*100)})(C(_.status),_.status),"%",(0,t.jsx)("span",{children:a("tracking.complete")})]})]}),(0,t.jsx)("div",{className:d().progressBar,children:u(_.status,a).map((e,s)=>{let i=C(_.status),n=u(_.status,a),r=e.stage<=i,l=e.stage===i;return(0,t.jsxs)("div",{className:d().milestoneWrapper,children:[(0,t.jsxs)("div",{className:d().milestoneItem,children:[(0,t.jsx)("div",{className:"".concat(d().milestoneIcon," ").concat(r?d().completed:""," ").concat(l?d().active:""),children:e.icon}),(0,t.jsx)("span",{className:"".concat(d().milestoneLabel," ").concat(r?d().completed:""," ").concat(l?d().active:""),children:e.label})]}),s<n.length-1&&(0,t.jsx)("div",{className:"".concat(d().progressLine," ").concat(r?d().completed:"")})]},e.stage)})}),_.expectedDeliveryDate&&4>C(_.status)&&(0,t.jsxs)("div",{className:d().estimatedDelivery,children:[(0,t.jsx)(r.Ohp,{}),(0,t.jsxs)("span",{children:[a("tracking.expectedDelivery"),": ",(e=>{let s=new Date(e),a=new Date().getTime()-s.getTime(),t=Math.floor(a/6e4),i=Math.floor(a/36e5),n=Math.floor(a/864e5);return t<60?"منذ ".concat(t," دقيقة"):i<24?"منذ ".concat(i," ساعة"):1===n?"أمس":n<7?"منذ ".concat(n," أيام"):b(e)})(_.expectedDeliveryDate)]})]})]}),(0,t.jsxs)("div",{className:d().infoGrid,children:[_.destinationAddress&&(0,t.jsxs)("div",{className:d().infoCard,children:[(0,t.jsx)(r.HzC,{className:d().infoIcon}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{children:a("tracking.destination")}),(0,t.jsxs)("p",{children:["ar"===c&&_.destinationAddress.arabicCityName||_.destinationAddress.city,"ar"===c&&_.destinationAddress.arabicRegionName&&", ".concat(_.destinationAddress.arabicRegionName),"en"===c&&_.destinationAddress.region&&", ".concat(_.destinationAddress.region)]})]})]}),_.fullReceiverName&&(0,t.jsxs)("div",{className:d().infoCard,children:[(0,t.jsx)(r.JXP,{className:d().infoIcon}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{children:a("tracking.receiver")}),(0,t.jsx)("p",{children:_.fullReceiverName})]})]})]}),(0,t.jsxs)("button",{className:d().detailsToggle,onClick:()=>D(!E),children:[(0,t.jsx)(r.S8s,{}),(0,t.jsx)("span",{children:a("tracking.shipmentDetails")}),E?(0,t.jsx)(r.wAb,{}):(0,t.jsx)(r.fK4,{})]}),E&&(0,t.jsxs)("div",{className:d().detailsCard,children:[(0,t.jsx)("h3",{children:a("tracking.shipmentInfo")}),(0,t.jsxs)("div",{className:d().detailsGrid,children:[(0,t.jsxs)("div",{className:d().detailItem,children:[(0,t.jsx)("span",{className:d().detailLabel,children:a("tracking.trackingNumber")}),(0,t.jsx)("span",{className:d().detailValue,children:_.barcode})]}),(0,t.jsxs)("div",{className:d().detailItem,children:[(0,t.jsx)("span",{className:d().detailLabel,children:a("tracking.createdDate")}),(0,t.jsxs)("span",{className:d().detailValue,children:[b(_.createdDate),(0,t.jsx)("small",{children:I(_.createdDate)})]})]}),_.deliveryDate&&(0,t.jsxs)("div",{className:d().detailItem,children:[(0,t.jsx)("span",{className:d().detailLabel,children:a("tracking.deliveryDate")}),(0,t.jsxs)("span",{className:d().detailValue,children:[b(_.deliveryDate),(0,t.jsx)("small",{children:I(_.deliveryDate)})]})]}),(0,t.jsxs)("div",{className:d().detailItem,children:[(0,t.jsx)("span",{className:d().detailLabel,children:a("tracking.currentStatus")}),(0,t.jsx)("span",{className:"".concat(d().detailValue," ").concat(d().statusValue),children:"ar"===c?_.arStatus:_.enStatus})]})]})]}),(0,t.jsxs)("div",{className:d().timelineCard,children:[(0,t.jsxs)("div",{className:d().timelineHeader,children:[(0,t.jsx)("h3",{children:a("tracking.detailedTimeline")}),_.deliveryRoute&&_.deliveryRoute.length>3&&(0,t.jsx)("button",{className:d().timelineToggle,onClick:()=>k(!f),children:f?a("tracking.showLess"):"".concat(a("tracking.showAll")," (").concat(_.deliveryRoute.length,")")})]}),(0,t.jsx)("div",{className:d().timeline,children:null==(e=f?_.deliveryRoute:null==(s=_.deliveryRoute)?void 0:s.slice(0,3))?void 0:e.map((e,s)=>(0,t.jsxs)("div",{className:d().timelineItem,children:[(0,t.jsx)("div",{className:"".concat(d().timelineDot," ").concat(0===s?d().active:"")}),(0,t.jsxs)("div",{className:d().timelineContent,children:[(0,t.jsx)("p",{className:d().timelineEvent,children:((e,s)=>{let a=(e||"").toLowerCase();return"en"===c?a?a.includes("signed")||a.includes("delivered to")||a.includes("received by")?"Shipment delivered to recipient":a.includes("changed")&&a.includes("delivered")?'Status changed to "Delivered"':a.includes("is delivering")||a.includes("out for delivery")?"Driver is on the way to deliver":a.includes("left")&&(a.includes("sorting")||a.includes("station"))?"Shipment left distribution center":a.includes("arrived")&&(a.includes("station")||a.includes("sorting"))?"Shipment arrived at distribution center":a.includes("picked up")||a.includes("has picked")?"Shipment picked up by courier":a.includes("added the package")||a.includes("created")?"Shipment order created":a.includes("transit")||a.includes("on the way")?"Shipment in transit":a.includes("return")||a.includes("rejected")?"Shipment returned":a.includes("failed")?"Delivery attempt failed":"Status update":"Status update":a||s?a.includes("signed")||a.includes("delivered to")||a.includes("received by")||a.includes("parcel")&&a.includes("signed")?"تم تسليم الشحنة للمستلم بنجاح":a.includes("changed")&&a.includes("delivered")?'تم تغيير حالة الشحنة إلى "تم التوصيل"':a.includes("is delivering")||a.includes("out for delivery")||a.includes("courier")&&a.includes("delivering")?"السائق في طريقه لتوصيل الشحنة":a.includes("left")&&(a.includes("sorting")||a.includes("station")||a.includes("center"))?"غادرت الشحنة مركز التوزيع":a.includes("arrived")&&(a.includes("station")||a.includes("sorting")||a.includes("center"))?"وصلت الشحنة إلى مركز التوزيع":a.includes("picked up")||a.includes("has picked")||a.includes("pickup")&&a.includes("courier")?"تم استلام الشحنة من قبل المندوب":a.includes("changed package status")||a.includes("changed status")?a.includes("received at sorting")?"تم استلام الشحنة في مركز الفرز":a.includes("dispatching")?"الشحنة جاهزة للإرسال":"تم تحديث حالة الشحنة":a.includes("added the package")||a.includes("added package")||a.includes("created")||a.includes("registered")?"تم إنشاء طلب الشحن":a.includes("abnormal")||a.includes("exception")||a.includes("unreceived")?"تم تسجيل ملاحظة على الشحنة":a.includes("transit")||a.includes("on the way")||a.includes("in route")?"الشحنة في الطريق":a.includes("sorting")||a.includes("processing")?"جاري فرز ومعالجة الشحنة":a.includes("return")||a.includes("rejected")?"تم إرجاع الشحنة":a.includes("failed")||a.includes("unsuccessful")?"فشلت محاولة التوصيل":a.includes("warehouse")?"الشحنة في المستودع":a.includes("arrived")?"وصلت الشحنة إلى مركز التوزيع":a.includes("left")||a.includes("departed")||a.includes("dispatched")?"غادرت الشحنة مركز التوزيع":"تحديث حالة الشحنة":"تحديث حالة الشحنة"})(e.name,e.arabicName)}),(0,t.jsxs)("div",{className:d().timelineMeta,children:[(0,t.jsx)(r.wIk,{}),(0,t.jsx)("span",{className:d().gregorianDate,children:b(e.deliveryDate)})]}),(0,t.jsx)("div",{className:d().timelineMetaSecondary,children:(0,t.jsx)("span",{className:d().islamicDate,children:I(e.deliveryDate)})}),e.userName&&(0,t.jsxs)("div",{className:d().timelineMeta,children:[(0,t.jsx)(r.JXP,{}),(0,t.jsx)("span",{children:e.userName})]})]})]},s))})]})]})]})})]})}r.A3x,r.BLY,r.est}},e=>{e.O(0,[459,6603,3945,8441,1255,7358],()=>e(e.s=469)),_N_E=e.O()}]);