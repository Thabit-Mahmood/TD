(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2162],{4373:(s,e,a)=>{Promise.resolve().then(a.bind(a,7427))},4980:s=>{s.exports={authPage:"page_authPage__20L97",authContainer:"page_authContainer__NxR4g",authCard:"page_authCard__Xd9QR",logo:"page_logo__HY8pj",logoIcon:"page_logoIcon__RJ3mN",subtitle:"page_subtitle__xgkaS",stepDesc:"page_stepDesc__wQUHT",form:"page_form__Ee7hv",inputGroup:"page_inputGroup___l1mT",inputWrapper:"page_inputWrapper__TgYco",inputIcon:"page_inputIcon__Y6bFK",input:"page_input__9TBJD",otpInput:"page_otpInput__gUGTH",togglePassword:"page_togglePassword__1yXkS",submitButton:"page_submitButton__UjczO",secondaryButton:"page_secondaryButton__ePQvF",formActions:"page_formActions__2SdgB",backLink:"page_backLink__0YBeV",successAlert:"page_successAlert__yJJ0b",errorAlert:"page_errorAlert__zjCvn",successContainer:"page_successContainer__nzljU",successIcon:"page_successIcon__DBHBB"}},7427:(s,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>p});var t=a(5155),o=a(2115),r=a(2619),n=a.n(r),i=a(5239),c=a(2694),l=a(3945),d=a(4980),u=a.n(d);function p(){let{language:s,t:e}=(0,l.useLanguage)(),[a,r]=(0,o.useState)("email"),[d,p]=(0,o.useState)(""),[g,m]=(0,o.useState)(""),[h,f]=(0,o.useState)(""),[_,j]=(0,o.useState)(""),[w,x]=(0,o.useState)(!1),[N,P]=(0,o.useState)(!1),[b,v]=(0,o.useState)(!1),[y,C]=(0,o.useState)(""),[S,k]=(0,o.useState)(""),T="ar"===s?c.dyV:c.kRp,B=async s=>{if(s.preventDefault(),C(""),!d)return void C(e("forgotPassword.emailRequired"));if("info@tdlogistics.co"!==d)return void C(e("forgotPassword.emailNotFound"));v(!0);try{let s=await fetch("/api/admin/otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"request",email:d})}),a=await s.json();if(!s.ok)throw Error(a.error||e("forgotPassword.error"));r("verify"),k(e("forgotPassword.otpSent"))}catch(s){C(s instanceof Error?s.message:e("forgotPassword.error"))}finally{v(!1)}},I=async s=>{if(s.preventDefault(),C(""),!g)return void C(e("forgotPassword.otpRequired"));v(!0);try{let s=await fetch("/api/admin/otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"verify",email:d,otp:g})}),a=await s.json();if(!s.ok)throw Error(a.error||e("forgotPassword.error"));r("newPassword"),k(e("forgotPassword.otpVerified"))}catch(s){C(s instanceof Error?s.message:e("forgotPassword.error"))}finally{v(!1)}},D=async s=>{if(s.preventDefault(),C(""),h.length<6)return void C(e("forgotPassword.passwordMinLength"));if(h!==_)return void C(e("forgotPassword.passwordMismatch"));v(!0);try{let s=await fetch("/api/admin/otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"changePassword",email:d,otp:g,newPassword:h})}),a=await s.json();if(!s.ok)throw Error(a.error||e("forgotPassword.error"));r("success")}catch(s){C(s instanceof Error?s.message:e("forgotPassword.error"))}finally{v(!1)}};return(0,t.jsx)("div",{className:u().authPage,children:(0,t.jsx)("div",{className:u().authContainer,children:(0,t.jsxs)("div",{className:u().authCard,children:[(0,t.jsx)(n(),{href:"/",className:u().logo,children:(0,t.jsx)(i.default,{src:"/logo.png",alt:"TD Logistics",width:150,height:75,className:u().logoImage})}),(0,t.jsx)("h1",{children:e("forgotPassword.title")}),(0,t.jsx)("p",{className:u().subtitle,children:e("forgotPassword.subtitle")}),S&&"success"!==a&&(0,t.jsxs)("div",{className:u().successAlert,children:[(0,t.jsx)(c.YrT,{}),S]}),y&&(0,t.jsxs)("div",{className:u().errorAlert,children:[(0,t.jsx)(c.y3G,{}),y]}),"email"===a&&(0,t.jsxs)("form",{onSubmit:B,className:u().form,children:[(0,t.jsx)("p",{className:u().stepDesc,children:e("forgotPassword.enterEmail")}),(0,t.jsxs)("div",{className:u().inputGroup,children:[(0,t.jsx)("label",{children:e("forgotPassword.email")}),(0,t.jsxs)("div",{className:u().inputWrapper,children:[(0,t.jsx)(c.pHD,{className:u().inputIcon}),(0,t.jsx)("input",{type:"email",value:d,onChange:s=>p(s.target.value),placeholder:"example@email.com",className:u().input,dir:"ltr",autoComplete:"email"})]})]}),(0,t.jsx)("button",{type:"submit",className:u().submitButton,disabled:b,children:b?e("forgotPassword.sending"):e("forgotPassword.sendOtp")}),(0,t.jsxs)(n(),{href:"/login",className:u().backLink,children:[(0,t.jsx)(T,{}),e("forgotPassword.backToLogin")]})]}),"verify"===a&&(0,t.jsxs)("form",{onSubmit:I,className:u().form,children:[(0,t.jsx)("p",{className:u().stepDesc,children:e("forgotPassword.enterOtp")}),(0,t.jsxs)("div",{className:u().inputGroup,children:[(0,t.jsx)("label",{children:e("forgotPassword.otpCode")}),(0,t.jsx)("input",{type:"text",value:g,onChange:s=>m(s.target.value),className:u().otpInput,placeholder:"123456",maxLength:6,dir:"ltr"})]}),(0,t.jsxs)("div",{className:u().formActions,children:[(0,t.jsx)("button",{type:"submit",className:u().submitButton,disabled:b,children:b?e("forgotPassword.verifying"):e("forgotPassword.verify")}),(0,t.jsx)("button",{type:"button",className:u().secondaryButton,onClick:()=>{r("email"),C(""),k("")},children:e("common.back")})]})]}),"newPassword"===a&&(0,t.jsxs)("form",{onSubmit:D,className:u().form,children:[(0,t.jsx)("p",{className:u().stepDesc,children:e("forgotPassword.enterNewPassword")}),(0,t.jsxs)("div",{className:u().inputGroup,children:[(0,t.jsx)("label",{children:e("forgotPassword.newPassword")}),(0,t.jsxs)("div",{className:u().inputWrapper,children:[(0,t.jsx)(c.F5$,{className:u().inputIcon}),(0,t.jsx)("input",{type:w?"text":"password",value:h,onChange:s=>f(s.target.value),placeholder:"••••••••",className:u().input,minLength:6,dir:"ltr"}),(0,t.jsx)("button",{type:"button",className:u().togglePassword,onClick:()=>x(!w),children:w?(0,t.jsx)(c._NO,{}):(0,t.jsx)(c.Vap,{})})]})]}),(0,t.jsxs)("div",{className:u().inputGroup,children:[(0,t.jsx)("label",{children:e("forgotPassword.confirmPassword")}),(0,t.jsxs)("div",{className:u().inputWrapper,children:[(0,t.jsx)(c.F5$,{className:u().inputIcon}),(0,t.jsx)("input",{type:N?"text":"password",value:_,onChange:s=>j(s.target.value),placeholder:"••••••••",className:u().input,minLength:6,dir:"ltr"}),(0,t.jsx)("button",{type:"button",className:u().togglePassword,onClick:()=>P(!N),children:N?(0,t.jsx)(c._NO,{}):(0,t.jsx)(c.Vap,{})})]})]}),(0,t.jsxs)("div",{className:u().formActions,children:[(0,t.jsx)("button",{type:"submit",className:u().submitButton,disabled:b,children:b?e("forgotPassword.changing"):e("forgotPassword.changePassword")}),(0,t.jsx)("button",{type:"button",className:u().secondaryButton,onClick:()=>{r("email"),C(""),k(""),m("")},children:e("common.cancel")})]})]}),"success"===a&&(0,t.jsxs)("div",{className:u().successContainer,children:[(0,t.jsx)("div",{className:u().successIcon,children:(0,t.jsx)(c.YrT,{})}),(0,t.jsx)("h2",{children:e("forgotPassword.successTitle")}),(0,t.jsx)("p",{children:e("forgotPassword.successDesc")}),(0,t.jsx)(n(),{href:"/login",className:u().submitButton,children:e("forgotPassword.goToLogin")})]})]})})})}}},s=>{s.O(0,[6675,6603,3193,5239,3945,8441,1255,7358],()=>s(s.s=4373)),_N_E=s.O()}]);