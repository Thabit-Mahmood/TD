(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3492],{63:(e,s,r)=>{"use strict";var a=r(7260);r.o(a,"useParams")&&r.d(s,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(s,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(s,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(s,{useSearchParams:function(){return a.useSearchParams}})},143:(e,s,r)=>{"use strict";r.d(s,{o:()=>a.useLanguage});var a=r(3945)},4967:(e,s,r)=>{Promise.resolve().then(r.bind(r,8481))},6854:e=>{e.exports={unsubscribePage:"page_unsubscribePage__TS7Cb",card:"page_card__IbFYf",iconWrapper:"page_iconWrapper__kT8H8",mailIcon:"page_mailIcon__tcgsD",successIcon:"page_successIcon__tIi7a",errorIcon:"page_errorIcon__WpM8f",loadingText:"page_loadingText__Xa9Lw",successText:"page_successText___hl09",errorText:"page_errorText__xmtCc",subText:"page_subText__FR_sr",actions:"page_actions__EPJmk"}},8481:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>_});var a=r(5155),c=r(2115),n=r(63),i=r(2619),u=r.n(i),t=r(2694),o=r(143),l=r(6854),d=r.n(l);function m(){let{t:e}=(0,o.o)(),s=(0,n.useSearchParams)().get("email")||"",[r,i]=(0,c.useState)("idle"),[l,m]=(0,c.useState)(""),_=async()=>{if(!s){i("error"),m(e("unsubscribe.noEmail"));return}i("loading");try{let r=await fetch("/api/newsletter/unsubscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s})}),a=await r.json();if(!r.ok)throw Error(a.error||e("unsubscribe.error"));i("success"),m(e("unsubscribe.success"))}catch(s){i("error"),m(s instanceof Error?s.message:e("unsubscribe.error"))}};return(0,c.useEffect)(()=>{s&&"idle"===r&&_()},[s]),(0,a.jsx)("div",{className:d().unsubscribePage,children:(0,a.jsx)("div",{className:"container",children:(0,a.jsxs)("div",{className:d().card,children:[(0,a.jsx)("div",{className:d().iconWrapper,children:"success"===r?(0,a.jsx)(t.YrT,{className:d().successIcon}):"error"===r?(0,a.jsx)(t.y3G,{className:d().errorIcon}):(0,a.jsx)(t.pHD,{className:d().mailIcon})}),(0,a.jsx)("h1",{children:e("unsubscribe.title")}),"loading"===r&&(0,a.jsx)("p",{className:d().loadingText,children:e("common.loading")}),"success"===r&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:d().successText,children:l}),(0,a.jsx)("p",{className:d().subText,children:e("unsubscribe.successDesc")})]}),"error"===r&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("p",{className:d().errorText,children:l})}),"idle"===r&&!s&&(0,a.jsx)("p",{className:d().errorText,children:e("unsubscribe.noEmail")}),(0,a.jsx)("div",{className:d().actions,children:(0,a.jsx)(u(),{href:"/",className:"btn btn-primary",children:e("unsubscribe.backHome")})})]})})})}function _(){let{t:e}=(0,o.o)();return(0,a.jsx)(c.Suspense,{fallback:(0,a.jsx)("div",{className:d().unsubscribePage,children:(0,a.jsx)("div",{className:"container",children:(0,a.jsx)("div",{className:d().card,children:(0,a.jsx)("p",{children:e("common.loading")})})})}),children:(0,a.jsx)(m,{})})}}},e=>{e.O(0,[929,6603,3193,3945,8441,1255,7358],()=>e(e.s=4967)),_N_E=e.O()}]);